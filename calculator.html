<!DOCTYPE html>
<html>

<head>
    <title>Jun's Calculator</title>
    <meta charset="UTF-8" />
    <link rel ='stylesheet' href='styles.css'>
</head>

<body>
    <div id='background'>
        <div id='top'></div>
        <div id='middle'></div>
        <div id='bot'></div>
    </div>
    <div id=title>Jun's Calculator !</div>
    <div class='centered' id='wholecalc'>
        <div  id='display'>0</div>
        <div id='toprow'><div class='buttons' id='clear'>CE</div>
        <div class='buttons' id='backspace'>Back</div></div>
        <div  id='buttongrid'>
            <div class='buttons' id='1'>1</div>
            <div class='buttons' id='2'>2</div>
            <div class='buttons' id='3'>3</div>
            <div class='buttons operator' id='add'>+</div>
            <div class='buttons' id='4'>4</div>
            <div class='buttons' id='5'>5</div>
            <div class='buttons' id='6'>6</div>
            <div class='buttons operator' id='subtract'>-</div>
            <div class='buttons' id='7'>7</div>
            <div class='buttons' id='8'>8</div>
            <div class='buttons' id='9'>9</div>
            <div class='buttons operator' id='multiply'>*</div>
            <div class='buttons' id='0'>0</div>
            <div class='buttons' id='decimal'>.</div>
            <div class='buttons operator' id='equals'>=</div>
            <div class='buttons operator' id='divide'>/</div>
        </div>
    </div>
    <script>
        let displaynum='';
        let firstNum='';
        let secondNum='';
        let operatorPressed=false;
        let operatorChosen='';

        const buttons=document.querySelectorAll('.buttons');
        buttons.forEach((a)=>{
            a.addEventListener('click',()=>{
                
                let z=a.textContent;
                
                if (a.classList.contains('operator')){
                    if (a.id==('equals')||(operatorPressed==true)){
                        displaynum=operate(firstNum,secondNum,operatorChosen);
                        firstNum=displaynum;
                        secondNum='';
                        operatorPressed=false;
                        operatorChosen='';
                        console.log([firstNum,secondNum,operatorPressed,operatorChosen])
                        if (a.id!=='equals'){
                            operatorChosen=z;
                            displaynum+=z;
                            operatorPressed=true;
                        }
                        
                    }else{
                        operatorPressed=true;
                        operatorChosen=z
                        displaynum+=z;
                        };
                    
                }else if (a.id!=='backspace'){
                    displaynum+=z;
                    if (operatorPressed){
                        
                        if(a.id!=='backspace'){secondNum+=z}

                    }else{firstNum+=z};  
                    }
                    
                if (a.id==('clear')){
                    z=''
                    displaynum='';
                    firstNum='';
                    secondNum='';
                    operatorPressed=false;
                    operatorChosen='';
                }
                if (a.id==('backspace')){
                    displaynum=displaynum.slice(0,-1);
                    if (operatorPressed){
                        secondNum=secondNum.slice(0,-1);
                    }else{
                        firstNum=firstNum.slice(0,-1);
                    }
                }
                    
                let disp=document.querySelector('#display');
                disp.textContent=displaynum;
                
            })
        });
        function operate(num1,num2,operation){
            let x=parseInt(num1);
            let y=parseInt(num2);
            if (num2==0&&operation=='/'){
                return 'fuck you'
            }
            if ((!num2&&operatorPressed) || !num1 ){
                return 'Error';
            }
            if (!num2 && num1)
                return num1.toString();
            switch(operation){
                case '+':
                    return (x+y).toString();
                    break;
                case '-':
                    return (x-y).toString();
                    break;
                case '/':
                    return (x/y).toString();
                    break;
                case '*':
                    return (x*y).toString();
                    break;
            }
        }

    </script>
</body>

</html>